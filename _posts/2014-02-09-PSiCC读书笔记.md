---
layout : post
title : PSiCC读书笔记
tag : 状态机
---

又是英文版，头痛。PSiCC的全称是 *Practical Statecharts in C/C++:Quantum Programming for Embedded Systems*。 把这本书啃完，状态机就差不多了吧。

####导论
所有的计算机系统都是事件驱动的，不管是通用的还是特殊的嵌入式系统，这就意味着它们在不断的等待事件的发生。我们把可以用一个实时方法处理很多异步事件的简洁程序程序架构叫做事件驱动编程。

####反向控制
比如说一个程序要实现了按钮按下输出高电平这个功能。

* 传统程序的控制流：按下按键，产生一个按键外部中断，然后在中断处理程序里面实现输出高电平。
* 事件驱动程序的控制流:按下按键，产生一个外部中断，事件驱动核收到这个中断，调用一个程序输出高电平。

传统程序的控制权一直都是在应用程序中的，是由应用程序来调用别的程序。而事件驱动程序的控制权是在事件驱动核中，是由事件驱动核去调用别的程序。这个就是"Don't call us, we'll call you"的意思吧。

这样做的结果是：

1.自然的分开内核和应用。

2.控制权颠倒。

3.事件驱动应用必须反过来控制之后处理的每个事件，所以进程上下文不能保存在栈中而且程序指针（PC）作为一个顺序程序。所以，事件驱动程序成为一个状态机。



